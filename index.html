<!DOCTYPE html>
<html>
    <head>
        <title> Parakh-Login </title>
        <meta id="meta" name="google-signin-client_id" content="">
        <link rel="icon" id="favicon" type="image/jpg" href="" />
        <script src="js/libs/customLib/mainPageJs.js" type="text/javascript"></script>
        <script src="https://apis.google.com/js/platform.js?onload=callBackFunction" async defer></script>
        <link href="css/login.css" rel="stylesheet" type="text/css"/>
        <script>

            function signinOnclick() {
                var auth2;
                gapi.load('auth2', function () {
                    /**
                     * Retrieve the singleton for the GoogleAuth library and set up the
                     * client.
                     */

                    gapi.auth2.getAuthInstance({
                        client_id: clientId
                    }).attachClickHandler('my-signin2', {}, onSuccess, onFailure);
                    function onSuccess(user) {
                        console.log(user.getBasicProfile());
                        var email = user.getBasicProfile().U3;
                        var pic = user.getBasicProfile().Paa;
                        var name = user.getBasicProfile().ig;
                        setCookie("email",email,1);
                        setCookie("name",name,1);
                        setCookie("picture",pic,1);
                        
                        setTimeout(function () {
                            window.location = window.location.href + "dashboard.html";
                        }, 500);

                    }
                    ;
                    /**
                     * Handle sign-in failures.
                     */
                    var onFailure = function (error) {
                        console.log(error);
                    };

                });
                /**
                 * Handle successful sign-ins.
                 */

            }


            function callBackFunction() {
                renderButton();
                signinOnclick();

            }
            function renderButton() {
                gapi.signin2.render('my-signin2', {
                    'scope': 'profile email',
                    'width': 340,
                    'height': 60,
                    'longtitle': true,
                    'theme': 'dark'
                });
            }
            function setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }
        </script>
        <style>
            #login-Background{
                position:absolute;
                top:0px;
                left:0px;
                width:100%;
                height:100%;
                z-index:-1;
            }
        </style>
        <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js'></script>
        <script>
            //Add images
            var images = ['images/parakh.jpg', 'images/parakh2.jpg'];
            var thisImage = images[Math.floor(Math.random() * images.length)];
            //setting the path
            $(document).ready(function () {
                $("#login-background").css("background", "url('" + thisImage + "') no-repeat fixed 0 0 /cover");
            });
        </script>

    </head>
    <body id="login-background">
        <img class="login-btn" src="images/sign-in-with-google.png" id="my-signin2"/>
        <div  class="login-logo">
            <img src="images/login-logo.png"/>
        </div>
    </body>
</html>